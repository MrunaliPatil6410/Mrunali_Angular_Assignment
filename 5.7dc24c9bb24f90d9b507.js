(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7UCR":function(e,t,r){"use strict";r.r(t),r.d(t,"UserModule",function(){return q});var o=r("ofXK"),s=r("tyNb"),i=r("fXoL"),b=r("VGjC");function c(e,t){if(1&e&&(i.Pb(0,"tr"),i.Pb(1,"td"),i.uc(2),i.Ob(),i.Pb(3,"td"),i.uc(4),i.Ob(),i.Pb(5,"td"),i.uc(6),i.Ob(),i.Pb(7,"td"),i.uc(8),i.Ob(),i.Pb(9,"td"),i.uc(10),i.Ob(),i.Pb(11,"td"),i.uc(12),i.Ob(),i.Ob()),2&e){const e=t.$implicit;i.yb(2),i.vc(e.id),i.yb(2),i.vc(e.sourceLoc),i.yb(2),i.vc(e.destLoc),i.yb(2),i.vc(e.flightAmt),i.yb(2),i.vc(e.availableTickets),i.yb(2),i.vc(e.flightDate)}}let n=(()=>{class e{constructor(e,t,r){this.route=e,this.userService=t,this.router=r,this.collection=[]}ngOnInit(){this.userService.getFlights().subscribe(e=>{console.log(e),this.collection=e})}bookFlight(){this.router.navigate(["/user/login"])}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(s.a),i.Kb(b.a),i.Kb(s.b))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-availableflights"]],decls:28,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[2,"color","rgb(25, 23, 160)","text-align","center"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Lb(2,"br"),i.Pb(3,"button",2),i.Zb("click",function(){return t.bookFlight()}),i.uc(4,"Book Flight"),i.Ob(),i.Ob(),i.Ob(),i.Lb(5,"hr"),i.Pb(6,"h2",3),i.Pb(7,"strong"),i.uc(8,"All Flights"),i.Ob(),i.Ob(),i.Lb(9,"br"),i.Pb(10,"div"),i.Pb(11,"table",4),i.Pb(12,"thead"),i.Pb(13,"tr"),i.Pb(14,"th",5),i.uc(15,"FlightId"),i.Ob(),i.Pb(16,"th",5),i.uc(17,"Source Location"),i.Ob(),i.Pb(18,"th",5),i.uc(19,"Destination Location"),i.Ob(),i.Pb(20,"th",5),i.uc(21,"Flight Amount"),i.Ob(),i.Pb(22,"th",5),i.uc(23,"Available Tickets"),i.Ob(),i.Pb(24,"th",5),i.uc(25,"Flight Date"),i.Ob(),i.Ob(),i.Ob(),i.Pb(26,"tbody"),i.sc(27,c,13,6,"tr",6),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.yb(27),i.gc("ngForOf",t.collection))},directives:[o.i],styles:[""]}),e})();var a=r("3Pt+"),l=r("tk/3");let u=(()=>{class e{constructor(e){this.httpClient=e,this.globalCollection=[],this.url="http://localhost:3000/flights"}saveCollection(e){e=this.httpClient.get(this.url),this.globalCollection=e}updateCollection(e){return this.globalCollection[this.id].availableTickets-1}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(l.a))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",20),i.Pb(1,"strong"),i.uc(2,"Success !"),i.Ob(),i.uc(3," Your data has been entered successfully. "),i.Pb(4,"button",21),i.Zb("click",function(){return i.oc(e),i.bc().closeAlert()}),i.Pb(5,"span",22),i.uc(6,"\xd7"),i.Ob(),i.Ob(),i.Ob()}}function g(e,t){1&e&&(i.Pb(0,"span",23),i.uc(1,"*user name is required"),i.Ob())}function h(e,t){1&e&&(i.Pb(0,"span",23),i.uc(1," *gender is required"),i.Ob())}function m(e,t){1&e&&(i.Pb(0,"span",23),i.uc(1," *age is invalid"),i.Ob())}let f=(()=>{class e{constructor(e,t,r,o){this.route=e,this.userService=t,this.router=r,this.dataService=o,this.bookFlightForm=new a.e({flightId:new a.c(""),userName:new a.c("",a.s.required),gender:new a.c("",a.s.required),age:new a.c("",[a.s.required,a.s.pattern(/^[1-9]+[0-9]*$/)]),flightDate:new a.c(""),availableTickets:new a.c("")}),this.alert=!1}ngOnInit(){console.log(this.route.snapshot.params.id),this.userService.getCurrentFlight(this.route.snapshot.params.id).subscribe(e=>{this.bookFlightForm=new a.e({flightId:new a.c(e.id),flightDate:new a.c(e.flightDate),userName:new a.c(e.userName,a.s.required),gender:new a.c(e.gender,a.s.required),age:new a.c(e.age,[a.s.required,a.s.pattern(/^[1-9]+[0-9]*$/)]),availableTickets:new a.c(e.availableTickets-1)})})}get userName(){return this.bookFlightForm.get("userName")}get gender(){return this.bookFlightForm.get("gender")}get age(){return this.bookFlightForm.get("age")}bookFlight(){this.userService.bookFlight(this.bookFlightForm.value).subscribe(e=>{console.log("result is here",e)}),this.alert=!0,this.bookFlightForm.reset({})}flightId(e,t){throw new Error("Method not implemented.")}closeAlert(){this.alert=!1,this.router.navigate(["user/showflights"])}onCancle(){this.router.navigate(["user/showflights"])}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(s.a),i.Kb(b.a),i.Kb(s.b),i.Kb(u))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-bookflight"]],decls:43,vars:5,consts:[["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","flightId",1,"form-label"],["type","text","id","flightId","name","flightId","formControlName","flightId",1,"form-control"],["for","userName",1,"form-label"],["type","text","id","userName","placeholder","Enter User name","name","userName","formControlName","userName",1,"form-control"],["class","error",4,"ngIf"],["for","gender",1,"form-label"],[1,"form-control"],["type","radio","name","gender","formControlName","gender","value","male"],["for","customRadio1"],["type","radio","name","gender","formControlName","gender","value","female"],["for","customRadio2"],["for","age",1,"form-label"],["type","number","id","age","placeholder","Enter your age","name","age","formControlName","age",1,"form-control"],["for","flightDate",1,"form-label"],["type","date","id","flightDate","name","flightDate","formControlName","flightDate",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"error"]],template:function(e,t){1&e&&(i.Lb(0,"br"),i.Lb(1,"br"),i.Lb(2,"br"),i.sc(3,d,7,0,"div",0),i.Pb(4,"form",1),i.Zb("ngSubmit",function(){return t.bookFlight()}),i.Pb(5,"div",2),i.Pb(6,"label",3),i.uc(7,"Flight Id"),i.Ob(),i.Lb(8,"input",4),i.Ob(),i.Pb(9,"div",2),i.Pb(10,"label",5),i.uc(11,"User Name"),i.Ob(),i.Lb(12,"input",6),i.sc(13,g,2,0,"span",7),i.Ob(),i.Pb(14,"div",2),i.Pb(15,"label",8),i.uc(16,"Gender"),i.Ob(),i.Lb(17,"br"),i.Pb(18,"div",9),i.Lb(19,"input",10),i.uc(20,"\xa0\xa0 "),i.Pb(21,"label",11),i.uc(22,"Male"),i.Ob(),i.uc(23,"\xa0\xa0 "),i.Lb(24,"input",12),i.Pb(25,"label",13),i.uc(26,"Female"),i.Ob(),i.Ob(),i.sc(27,h,2,0,"span",7),i.Ob(),i.Pb(28,"div",2),i.Pb(29,"label",14),i.uc(30,"Age"),i.Ob(),i.Lb(31,"input",15),i.sc(32,m,2,0,"span",7),i.Ob(),i.Pb(33,"div",2),i.Pb(34,"label",16),i.uc(35,"Journey Date"),i.Ob(),i.Lb(36,"input",17),i.Ob(),i.Pb(37,"div"),i.Pb(38,"button",18),i.uc(39,"Submit"),i.Ob(),i.uc(40,"\xa0 "),i.Pb(41,"button",19),i.Zb("click",function(){return t.onCancle()}),i.uc(42,"Cancle"),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.yb(3),i.gc("ngIf",t.alert),i.yb(1),i.gc("formGroup",t.bookFlightForm),i.yb(9),i.gc("ngIf",!t.userName.valid&&t.userName.touched),i.yb(14),i.gc("ngIf",!t.gender.valid&&t.gender.touched),i.yb(5),i.gc("ngIf",!t.age.valid&&t.age.touched))},directives:[o.j,a.u,a.k,a.f,a.a,a.j,a.d,a.p,a.o],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.error[_ngcontent-%COMP%]{color:red}"]}),e})(),p=(()=>{class e{constructor(){}authUser(e){let t=[];return localStorage.getItem("Users")&&(t=JSON.parse(localStorage.getItem("Users"))),t.find(t=>t.name===e.name&&t.password===e.password)}loggedIn(){return!!localStorage.getItem("token")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function v(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",16),i.Pb(1,"strong"),i.uc(2,"Success !"),i.Ob(),i.uc(3," User Registered Successfully ! "),i.Pb(4,"button",17),i.Zb("click",function(){return i.oc(e),i.bc().closeAlert()}),i.Pb(5,"span",18),i.uc(6,"\xd7"),i.Ob(),i.Ob(),i.Ob()}}function O(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"Username is required !"),i.Ob())}function P(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"Username must be at least 5 characters"),i.Ob())}function y(e,t){if(1&e&&(i.Pb(0,"div"),i.sc(1,O,2,0,"small",19),i.sc(2,P,2,0,"small",19),i.Ob()),2&e){const e=i.bc();i.yb(1),i.gc("ngIf",null==e.createUser.get("userName").errors?null:e.createUser.get("userName").errors.required),i.yb(1),i.gc("ngIf",null==e.createUser.get("userName").errors?null:e.createUser.get("userName").errors.minlength)}}function w(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"Email is required !"),i.Ob())}function k(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"email is invalid"),i.Ob())}function L(e,t){if(1&e&&(i.Pb(0,"div"),i.sc(1,w,2,0,"small",19),i.sc(2,k,2,0,"small",19),i.Ob()),2&e){const e=i.bc();i.yb(1),i.gc("ngIf",null==e.createUser.get("email").errors?null:e.createUser.get("email").errors.required),i.yb(1),i.gc("ngIf",null==e.createUser.get("email").errors?null:e.createUser.get("email").errors.email)}}function F(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"Password is required !"),i.Ob())}function U(e,t){1&e&&(i.Pb(0,"small",20),i.uc(1,"Password must be at least 8 characters"),i.Ob())}function I(e,t){if(1&e&&(i.Pb(0,"div"),i.sc(1,F,2,0,"small",19),i.sc(2,U,2,0,"small",19),i.Ob()),2&e){const e=i.bc();i.yb(1),i.gc("ngIf",null==e.createUser.get("password").errors?null:e.createUser.get("password").errors.required),i.yb(1),i.gc("ngIf",null==e.createUser.get("password").errors?null:e.createUser.get("password").errors.minlength)}}function N(e,t){if(1&e&&(i.Pb(0,"tr"),i.Pb(1,"td"),i.uc(2),i.Ob(),i.Pb(3,"td"),i.uc(4),i.Ob(),i.Pb(5,"td"),i.uc(6),i.Ob(),i.Pb(7,"td"),i.uc(8),i.Ob(),i.Pb(9,"td"),i.uc(10),i.Ob(),i.Pb(11,"td"),i.uc(12),i.Ob(),i.Pb(13,"td"),i.Pb(14,"ul"),i.Pb(15,"a",6),i.uc(16,"Book Flight"),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e){const e=t.$implicit;i.yb(2),i.vc(e.id),i.yb(2),i.vc(e.sourceLoc),i.yb(2),i.vc(e.destLoc),i.yb(2),i.vc(e.flightAmt),i.yb(2),i.vc(e.availableTickets),i.yb(2),i.vc(e.flightDate),i.yb(3),i.ic("routerLink","/user/bookflight/",e.id,"")}}const S=[{path:"bookflight/:id",component:f},{path:"login",component:(()=>{class e{constructor(e,t,r,o){this.userService=e,this.route=t,this.authService=r,this.router=o}ngOnInit(){}onLogin(e){console.log(e.value);const t=this.authService.authUser(e.value);t?(localStorage.setItem("token",t.userName),console.log(t),alert("Login Successful"),this.router.navigate(["user/showflights"])):alert("Login not successful")}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(b.a),i.Kb(s.b),i.Kb(p),i.Kb(s.b))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-login"]],decls:24,vars:1,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-md-4","m-auto"],[1,"card","animated","jello"],[1,"card-header","bg-primary","text-white"],[1,"h4"],[1,"card-body","bg-light"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["type","text","placeholder","UserName","name","username","ngModel","","required","",1,"form-control"],["type","password","placeholder","Password","name","password","ngModel","","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["routerLink","/user/register"]],template:function(e,t){if(1&e){const e=i.Qb();i.Lb(0,"br"),i.Lb(1,"br"),i.Lb(2,"br"),i.Pb(3,"div",0),i.Pb(4,"div",1),i.Pb(5,"div",2),i.Pb(6,"div",3),i.Pb(7,"div",4),i.Pb(8,"div",5),i.uc(9,"Login Here"),i.Ob(),i.Ob(),i.Pb(10,"div",6),i.Pb(11,"form",7,8),i.Zb("ngSubmit",function(){i.oc(e);const r=i.nc(12);return t.onLogin(r)}),i.Pb(13,"div",9),i.Lb(14,"input",10),i.Ob(),i.Pb(15,"div",9),i.Lb(16,"input",11),i.Ob(),i.Pb(17,"div",9),i.Pb(18,"button",12),i.uc(19,"Login "),i.Ob(),i.Ob(),i.Pb(20,"small"),i.uc(21,"Don't have an Account ? "),i.Pb(22,"a",13),i.uc(23,"Register"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.nc(12);i.yb(18),i.gc("disabled",!e.valid)}},directives:[a.u,a.k,a.l,a.a,a.j,a.m,a.r,s.c],styles:[""]}),e})()},{path:"availableFlights",component:n},{path:"register",component:(()=>{class e{constructor(e,t,r){this.userService=e,this.fb=t,this.router=r,this.alert=!1,this.createUser=this.fb.group({userName:["",[a.s.required,a.s.minLength(5)]],email:["",[a.s.required,a.s.email]],password:["",[a.s.required,a.s.minLength(8)]]})}ngOnInit(){}onSubmit(){console.log(this.createUser.value),this.userService.registerUser(this.createUser.value).subscribe(e=>{console.log("result is here",e)}),this.alert=!0,this.createUser.reset({})}closeAlert(){this.alert=!1,this.router.navigate(["user/login"])}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(b.a),i.Kb(a.b),i.Kb(s.b))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-register"]],decls:27,vars:12,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-md-4","m-auto"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","bg-secondary","text-white",2,"background-color","rgb(53, 51, 51)"],[1,"h4"],[1,"card-body","bg-light"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","placeholder","Username","formControlName","userName",1,"form-control"],[4,"ngIf"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["type","submit","value","Register",1,"btn","btn-secondary","btn-md",3,"disabled"],["routerLink","/user/login"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,t){1&e&&(i.Lb(0,"br"),i.Lb(1,"br"),i.Pb(2,"div",0),i.Pb(3,"div",1),i.Pb(4,"div",2),i.sc(5,v,7,0,"div",3),i.Pb(6,"div",4),i.Pb(7,"div",5),i.Pb(8,"div",6),i.uc(9,"Register User Here"),i.Ob(),i.Ob(),i.Pb(10,"div",7),i.Pb(11,"form",8),i.Zb("ngSubmit",function(){return t.onSubmit()}),i.Pb(12,"div",9),i.Lb(13,"input",10),i.sc(14,y,3,2,"div",11),i.Ob(),i.Pb(15,"div",9),i.Lb(16,"input",12),i.sc(17,L,3,2,"div",11),i.Ob(),i.Pb(18,"div",9),i.Lb(19,"input",13),i.sc(20,I,3,2,"div",11),i.Ob(),i.Pb(21,"div",9),i.Lb(22,"input",14),i.Ob(),i.Pb(23,"small"),i.uc(24,"Have an Account ? "),i.Pb(25,"a",15),i.uc(26,"Login"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.yb(5),i.gc("ngIf",t.alert),i.yb(6),i.gc("formGroup",t.createUser),i.yb(2),i.Cb("is-invalid",t.createUser.get("userName").invalid&&t.createUser.get("userName").touched),i.yb(1),i.gc("ngIf",t.createUser.get("userName").invalid&&t.createUser.get("userName").touched),i.yb(2),i.Cb("is-invalid",t.createUser.get("email").invalid&&t.createUser.get("email").touched),i.yb(1),i.gc("ngIf",t.createUser.get("email").invalid&&t.createUser.get("email").touched),i.yb(2),i.Cb("is-invalid",t.createUser.get("userName").invalid&&t.createUser.get("userName").touched),i.yb(1),i.gc("ngIf",t.createUser.get("password").invalid&&t.createUser.get("password").touched),i.yb(2),i.gc("disabled",!t.createUser.valid))},directives:[o.j,a.u,a.k,a.f,a.a,a.j,a.d,s.c],styles:[""]}),e})()},{path:"showflights",component:(()=>{class e{constructor(e,t,r){this.route=e,this.userService=t,this.router=r,this.collection=[]}ngOnInit(){this.userService.getFlights().subscribe(e=>{console.log(e),this.collection=e})}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(s.a),i.Kb(b.a),i.Kb(s.b))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-showflights"]],decls:30,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[2,"color","rgb(25, 23, 160)","text-align","center"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Lb(2,"br"),i.Pb(3,"h2"),i.uc(4,"Available Flights"),i.Ob(),i.Ob(),i.Ob(),i.Lb(5,"hr"),i.Pb(6,"h2",2),i.Pb(7,"strong"),i.uc(8,"All Flights"),i.Ob(),i.Ob(),i.Lb(9,"br"),i.Pb(10,"div"),i.Pb(11,"table",3),i.Pb(12,"thead"),i.Pb(13,"tr"),i.Pb(14,"th",4),i.uc(15,"FlightId"),i.Ob(),i.Pb(16,"th",4),i.uc(17,"Source Location"),i.Ob(),i.Pb(18,"th",4),i.uc(19,"Destination Location"),i.Ob(),i.Pb(20,"th",4),i.uc(21,"Flight Amount"),i.Ob(),i.Pb(22,"th",4),i.uc(23,"Available Tickets"),i.Ob(),i.Pb(24,"th",4),i.uc(25,"Flight Date"),i.Ob(),i.Pb(26,"th",4),i.uc(27,"Book Flight"),i.Ob(),i.Ob(),i.Ob(),i.Pb(28,"tbody"),i.sc(29,N,17,7,"tr",5),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.yb(29),i.gc("ngForOf",t.collection))},directives:[o.i,s.c],styles:[""]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({imports:[[s.d.forChild(S)],s.d]}),e})();console.warn("User module loaded");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({imports:[[s.d,o.b,a.g,a.q,C]]}),e})()}}]);